#!/bin/bash

# This is for the Pine A64+

# The Pine64 platform requires some extra fandangling to resize the filesystem
# Thanks to Ayufan for doing all the legwork... I'd have scratched my head a while.

# There is also a folder located at /var/lib/pine64
# But we'll leave it to the cleanup script - not here

platform=$(/usr/local/share/nems/nems-scripts/info.sh platform)

if (( $platform == 11 )); then

  # Lower the CPU speed to 1.4GHz to reduce temperature and improve reliability
  echo 1400000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq
  echo 1400000 > /sys/devices/system/cpu/cpu4/cpufreq/scaling_max_freq
  echo conservative > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor

fi
