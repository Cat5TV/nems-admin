#!/bin/bash

# Web Interface
cd /var/www

git clone https://github.com/Cat5TV/nems-www

useradd www-data
chown -R www-data:www-data nems-www

# Detect if the snapshot folder is mounted (which means this is Docker)
if [[ -e /var/www/html/backup/snapshot/ ]]; then
  # Docker, so rsync instead of replace
  apt-get update
  apt-get install -y rsync
  rsync -a nems-www/. html/
  rm -rf nems-www
else
  # All other platforms (not Docker)
  if [[ -d html ]]; then
    rm -rf html
  fi
  mv nems-www html
fi
